{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport React, { useEffect, useState } from 'react';\nimport { collection, onSnapshot, orderBy, query, where } from 'firebase/firestore';\nimport { database } from \"../../firebase\";\n\nvar FirebaseGetRooms = function FirebaseGetRooms(owner) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      rooms = _useState2[0],\n      setRooms = _useState2[1];\n\n  if (!owner || !owner.length) {\n    setRooms([]);\n    return;\n  }\n\n  useEffect(function () {\n    var RoomsCollectionRef = collection(database, 'Rooms');\n    var q = query(RoomsCollectionRef, where(\"listMember\", \"array-contains\", owner));\n    var unsubcribe = onSnapshot(q, function (querySnapShot) {\n      var documents = querySnapShot.docs.map(function (doc) {\n        return _objectSpread({}, doc.data());\n      });\n      console.log('FirebaseGetRooms.js was called.');\n      setRooms(documents);\n    });\n    return unsubcribe;\n  }, [owner]);\n  return rooms;\n};\n\nexport default FirebaseGetRooms;","map":{"version":3,"names":["React","useEffect","useState","collection","onSnapshot","orderBy","query","where","database","FirebaseGetRooms","owner","rooms","setRooms","length","RoomsCollectionRef","q","unsubcribe","querySnapShot","documents","docs","map","doc","data","console","log"],"sources":["F:/Hoc ki 4/Cong nghe moi/AppChat/client/Components/service/FirebaseGetRooms.js"],"sourcesContent":["import { View, Text } from 'react-native';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { collection, onSnapshot, orderBy, query, where } from 'firebase/firestore';\r\nimport { database } from '../../firebase';\r\n\r\n//UseEffect này luôn lắng nge\r\n//UseEffect này chỉ chạy lại khi biến owner lớp cha gọi nó thay đổi giá trị truyền vào\r\n//Nếu thay đổi hàm sẽ đc thực thi => trả về danh sách rooms mới.\r\nconst FirebaseGetRooms = (owner) => {\r\n    const [rooms, setRooms] = useState([]);\r\n    if(!owner || !owner.length){\r\n        setRooms([]);\r\n        return;\r\n    }\r\n    useEffect(() => {\r\n        const RoomsCollectionRef = collection(database, 'Rooms');\r\n        const q = query(RoomsCollectionRef, where(\"listMember\", \"array-contains\", owner));\r\n        const unsubcribe = onSnapshot(q, (querySnapShot) => {\r\n            const documents = querySnapShot.docs.map( (doc) => ({...doc.data()}) );\r\n            console.log('FirebaseGetRooms.js was called.');\r\n            setRooms(documents);\r\n        });\r\n        return unsubcribe;\r\n    }, [owner]);\r\n    return rooms;\r\n};\r\n\r\nexport default FirebaseGetRooms;"],"mappings":";;;;;;;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,OAAjC,EAA0CC,KAA1C,EAAiDC,KAAjD,QAA8D,oBAA9D;AACA,SAASC,QAAT;;AAKA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAAW;EAChC,gBAA0BR,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAOS,KAAP;EAAA,IAAcC,QAAd;;EACA,IAAG,CAACF,KAAD,IAAU,CAACA,KAAK,CAACG,MAApB,EAA2B;IACvBD,QAAQ,CAAC,EAAD,CAAR;IACA;EACH;;EACDX,SAAS,CAAC,YAAM;IACZ,IAAMa,kBAAkB,GAAGX,UAAU,CAACK,QAAD,EAAW,OAAX,CAArC;IACA,IAAMO,CAAC,GAAGT,KAAK,CAACQ,kBAAD,EAAqBP,KAAK,CAAC,YAAD,EAAe,gBAAf,EAAiCG,KAAjC,CAA1B,CAAf;IACA,IAAMM,UAAU,GAAGZ,UAAU,CAACW,CAAD,EAAI,UAACE,aAAD,EAAmB;MAChD,IAAMC,SAAS,GAAGD,aAAa,CAACE,IAAd,CAAmBC,GAAnB,CAAwB,UAACC,GAAD;QAAA,yBAAcA,GAAG,CAACC,IAAJ,EAAd;MAAA,CAAxB,CAAlB;MACAC,OAAO,CAACC,GAAR,CAAY,iCAAZ;MACAZ,QAAQ,CAACM,SAAD,CAAR;IACH,CAJ4B,CAA7B;IAKA,OAAOF,UAAP;EACH,CATQ,EASN,CAACN,KAAD,CATM,CAAT;EAUA,OAAOC,KAAP;AACH,CAjBD;;AAmBA,eAAeF,gBAAf"},"metadata":{},"sourceType":"module"}