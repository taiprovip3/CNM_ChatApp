{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useContext, useEffect, useMemo, useState } from 'react';\nimport { AuthContext } from \"../provider/AuthProvider\";\nimport { collection, getDocs, orderBy, query, onSnapshot, addDoc, Timestamp, where, doc, updateDoc, arrayUnion } from 'firebase/firestore';\nimport { database } from \"../../firebase\";\nimport FirebaseGetFriendMessages from \"../service/FirebaseGetFriendMessages\";\nimport { Box, Center, Divider, HStack, NativeBaseProvider, Text, Button, Image, VStack, ScrollView, Input, Icon } from 'native-base';\nimport { AntDesign, FontAwesome5, Ionicons, MaterialCommunityIcons, MaterialIcons } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ChatFriendScreen(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useContext = useContext(AuthContext),\n      _useContext$currentUs = _useContext.currentUser,\n      id = _useContext$currentUs.id,\n      email = _useContext$currentUs.email,\n      photoURL = _useContext$currentUs.photoURL,\n      fullName = _useContext$currentUs.fullName,\n      socket = _useContext.socket;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentMessage = _useState2[0],\n      setCurrentMessage = _useState2[1];\n\n  var friendObj = route.params.friendObj;\n  var idRoom = route.params.idRoom;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      listObjectMessage = _useState4[0],\n      setListObjectMessage = _useState4[1];\n\n  var memoIdFriend = useMemo(function () {\n    return friendObj.id;\n  }, [friendObj.id]);\n  var memoIdUser = useMemo(function () {\n    return id;\n  }, [id]);\n  var friendMessages = FirebaseGetFriendMessages(memoIdFriend, memoIdUser);\n  useEffect(function () {\n    setListObjectMessage(friendMessages);\n  }, [friendMessages]);\n  useEffect(function () {\n    socket.on(\"receive_message\", function (objectMessage) {\n      setListObjectMessage(function (list) {\n        return [].concat(_toConsumableArray(list), [objectMessage]);\n      });\n    });\n  }, [socket]);\n\n  var sendMessage = function sendMessage() {\n    var time, objectMessage, FriendMessagesDocRef;\n    return _regeneratorRuntime.async(function sendMessage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(currentMessage != \"\")) {\n              _context.next = 9;\n              break;\n            }\n\n            time = Timestamp.now().toDate().toLocaleTimeString('en-US');\n            objectMessage = {\n              idSender: id,\n              nameSender: fullName,\n              msg: currentMessage,\n              time: time,\n              photoURL: 'https://res.cloudinary.com/dopzctbyo/image/upload/v1649587869/cld-sample.jpg',\n              idMessage: (Math.random() + 1).toString(36).substring(2)\n            };\n            socket.emit(\"send_message\", objectMessage, idRoom);\n            setListObjectMessage(function (list) {\n              return [].concat(_toConsumableArray(list), [objectMessage]);\n            });\n            FriendMessagesDocRef = doc(database, \"FriendMessages\", idRoom);\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(updateDoc(FriendMessagesDocRef, {\n              listObjectMessage: arrayUnion(objectMessage)\n            }));\n\n          case 8:\n            setCurrentMessage('');\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(NativeBaseProvider, {\n    children: [_jsx(Box, {\n      bg: \"#2190ff\",\n      children: _jsxs(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        children: [_jsxs(Box, {\n          flex: 1,\n          px: \"1\",\n          children: [_jsx(Text, {\n            bold: true,\n            fontSize: \"lg\",\n            color: \"white\",\n            children: friendObj.fullName\n          }), _jsxs(Text, {\n            color: \"white\",\n            fontSize: \"md\",\n            children: [friendObj.address, \" \\u0111\\u1ECBa ch\\u1EC9\"]\n          })]\n        }), _jsx(Box, {\n          px: \"2.5\",\n          children: _jsx(AntDesign, {\n            name: \"addusergroup\",\n            size: 24,\n            color: \"white\"\n          })\n        }), _jsx(Box, {\n          px: \"2.5\",\n          children: _jsx(Ionicons, {\n            name: \"image-outline\",\n            size: 24,\n            color: \"white\"\n          })\n        }), _jsx(Box, {\n          px: \"2.5\",\n          children: _jsx(MaterialCommunityIcons, {\n            name: \"dots-horizontal\",\n            size: 24,\n            color: \"white\"\n          })\n        })]\n      })\n    }), _jsx(Box, {\n      flex: 1,\n      bg: \"coolGray.300\",\n      children: _jsxs(ScrollView, {\n        children: [_jsx(Center, {\n          my: \"5\",\n          children: _jsx(Box, {\n            bg: \"white\",\n            borderRadius: \"lg\",\n            p: \"5\",\n            w: [24, 48, 72],\n            children: _jsxs(Center, {\n              children: [_jsx(Box, {\n                borderColor: \"coolGray.400\",\n                borderWidth: \"1\",\n                borderRadius: \"100\",\n                p: \"3\",\n                children: _jsx(MaterialIcons, {\n                  name: \"camera-enhance\",\n                  size: 24,\n                  color: \"grey\"\n                })\n              }), _jsxs(Center, {\n                children: [_jsx(Text, {\n                  bold: true,\n                  children: friendObj.fullName\n                }), _jsx(Text, {\n                  color: \"coolGray.400\",\n                  textAlign: \"center\",\n                  children: friendObj.joinDate\n                })]\n              }), _jsx(Divider, {\n                my: 2\n              }), _jsxs(HStack, {\n                space: \"3\",\n                flexWrap: \"wrap\",\n                justifyContent: \"center\",\n                children: [_jsx(Button, {\n                  size: \"xs\",\n                  rounded: \"2xl\",\n                  bg: \"coolGray.100\",\n                  _text: {\n                    color: '#0998eb',\n                    fontWeight: 'bold'\n                  },\n                  _hover: {\n                    bg: 'coolGray.200'\n                  },\n                  _pressed: {\n                    bg: 'coolGray.50'\n                  },\n                  children: \"Ch\\xE0o c\\u1EA3 nh\\xE0\"\n                }), _jsx(Button, {\n                  size: \"xs\",\n                  rounded: \"2xl\",\n                  bg: \"coolGray.100\",\n                  _text: {\n                    color: '#0998eb',\n                    fontWeight: 'bold'\n                  },\n                  _hover: {\n                    bg: 'coolGray.200'\n                  },\n                  _pressed: {\n                    bg: 'coolGray.50'\n                  },\n                  children: \"Hi m\\u1ECDi ng\\u01B0\\u1EDDi\"\n                }), _jsx(Button, {\n                  size: \"xs\",\n                  rounded: \"2xl\",\n                  bg: \"coolGray.100\",\n                  _text: {\n                    color: '#0998eb',\n                    fontWeight: 'bold'\n                  },\n                  _hover: {\n                    bg: 'coolGray.200'\n                  },\n                  _pressed: {\n                    bg: 'coolGray.50'\n                  },\n                  children: \"Hello\"\n                }), _jsx(Button, {\n                  size: \"xs\",\n                  rounded: \"2xl\",\n                  bg: \"coolGray.100\",\n                  _text: {\n                    color: '#0998eb',\n                    fontWeight: 'bold'\n                  },\n                  _hover: {\n                    bg: 'coolGray.200'\n                  },\n                  _pressed: {\n                    bg: 'coolGray.50'\n                  },\n                  endIcon: _jsx(FontAwesome5, {\n                    name: \"hands-wash\",\n                    size: 20,\n                    color: \"#d6aa09\"\n                  })\n                }), _jsx(Button, {\n                  size: \"xs\",\n                  rounded: \"2xl\",\n                  bg: \"coolGray.100\",\n                  _text: {\n                    color: '#0998eb',\n                    fontWeight: 'bold'\n                  },\n                  _hover: {\n                    bg: 'coolGray.200'\n                  },\n                  _pressed: {\n                    bg: 'coolGray.50'\n                  },\n                  children: \"G\\u1EEDi sticker xin ch\\xE0o\"\n                })]\n              })]\n            })\n          })\n        }), _jsx(Box, {\n          borderColor: \"coolGray.500\",\n          children: listObjectMessage.map(function (objectMessage) {\n            if (objectMessage.idSender === id) return _jsxs(HStack, {\n              style: {\n                flexDirection: 'row-reverse'\n              },\n              mx: \"1\",\n              my: \"0.5\",\n              children: [_jsx(Image, {\n                source: {\n                  uri: objectMessage.photoURL\n                },\n                alt: \"photoURL\",\n                size: 8,\n                borderRadius: 100\n              }), _jsxs(VStack, {\n                bg: \"#2accf7\",\n                p: \"2\",\n                borderRadius: \"lg\",\n                mx: \"0.5\",\n                my: \"0.5\",\n                children: [_jsx(Text, {\n                  fontSize: \"xs\",\n                  color: \"white\",\n                  children: objectMessage.nameSender\n                }), _jsx(Text, {\n                  bold: true,\n                  color: \"white\",\n                  children: objectMessage.msg\n                }), _jsx(Text, {\n                  color: \"white\",\n                  fontSize: \"xs\",\n                  children: objectMessage.time\n                })]\n              })]\n            }, objectMessage.idMessage);else return _jsxs(HStack, {\n              mx: \"1\",\n              children: [_jsx(Image, {\n                source: {\n                  uri: objectMessage.photoURL\n                },\n                alt: \"photoURL\",\n                size: 8,\n                borderRadius: 100\n              }), _jsxs(VStack, {\n                bg: \"white\",\n                p: \"2\",\n                borderRadius: \"lg\",\n                mx: \"0.5\",\n                my: \"0.5\",\n                children: [_jsx(Text, {\n                  fontSize: \"xs\",\n                  children: objectMessage.nameSender\n                }), _jsx(Text, {\n                  bold: true,\n                  children: objectMessage.msg\n                }), _jsx(Text, {\n                  color: \"coolGray.400\",\n                  fontSize: \"xs\",\n                  children: objectMessage.time\n                })]\n              })]\n            }, objectMessage.idMessage);\n          })\n        })]\n      })\n    }), _jsx(Box, {\n      children: _jsxs(HStack, {\n        alignItems: \"center\",\n        space: \"1\",\n        children: [_jsx(MaterialCommunityIcons, {\n          name: \"emoticon-kiss-outline\",\n          size: 28,\n          color: \"#2190ff\"\n        }), _jsx(Input, {\n          flex: 1,\n          size: \"md\",\n          variant: \"unstyled\",\n          placeholder: \"Tin nh\\u1EAFn, @\",\n          InputRightElement: _jsx(Icon, {\n            as: _jsx(MaterialCommunityIcons, {\n              name: \"send-circle\"\n            }),\n            size: 28,\n            color: \"#2190ff\",\n            onPress: sendMessage\n          }),\n          value: currentMessage,\n          onChangeText: function onChangeText(e) {\n            return setCurrentMessage(e);\n          }\n        }), _jsx(MaterialCommunityIcons, {\n          name: \"dots-horizontal\",\n          size: 28,\n          color: \"#2190ff\"\n        }), _jsx(MaterialCommunityIcons, {\n          name: \"file-image-plus\",\n          size: 28,\n          color: \"#2190ff\"\n        })]\n      })\n    })]\n  });\n}","map":{"version":3,"names":["React","useContext","useEffect","useMemo","useState","AuthContext","collection","getDocs","orderBy","query","onSnapshot","addDoc","Timestamp","where","doc","updateDoc","arrayUnion","database","FirebaseGetFriendMessages","Box","Center","Divider","HStack","NativeBaseProvider","Text","Button","Image","VStack","ScrollView","Input","Icon","AntDesign","FontAwesome5","Ionicons","MaterialCommunityIcons","MaterialIcons","ChatFriendScreen","route","navigation","currentUser","id","email","photoURL","fullName","socket","currentMessage","setCurrentMessage","friendObj","params","idRoom","listObjectMessage","setListObjectMessage","memoIdFriend","memoIdUser","friendMessages","on","objectMessage","list","sendMessage","time","now","toDate","toLocaleTimeString","idSender","nameSender","msg","idMessage","Math","random","toString","substring","emit","FriendMessagesDocRef","address","joinDate","color","fontWeight","bg","map","flexDirection","uri","e"],"sources":["F:/Hoc ki 4/Cong nghe moi/AppChat/client/Components/screen/ChatFriendScreen.js"],"sourcesContent":["import { View } from 'react-native'\r\nimport React, { useContext, useEffect, useMemo, useState } from 'react'\r\nimport { AuthContext } from '../provider/AuthProvider';\r\nimport { collection, getDocs, orderBy, query, onSnapshot, addDoc, Timestamp, where, doc, updateDoc, arrayUnion } from 'firebase/firestore';\r\nimport { database } from '../../firebase';\r\nimport FirebaseGetFriendMessages from '../service/FirebaseGetFriendMessages';\r\nimport { Box, Center, Divider, HStack, NativeBaseProvider, Text, Button, Image, VStack, ScrollView, Input, Icon } from 'native-base';\r\nimport { AntDesign, FontAwesome5, Ionicons, MaterialCommunityIcons, MaterialIcons } from '@expo/vector-icons';\r\n\r\nexport default function ChatFriendScreen({ route, navigation }) {\r\n//Khởi tạo biến\r\n    const { currentUser:{\r\n        id,\r\n        email,\r\n        photoURL,\r\n        fullName\r\n    }, socket } = useContext(AuthContext);\r\n    const [currentMessage, setCurrentMessage] = useState('');\r\n    const friendObj = route.params.friendObj;\r\n    const idRoom = route.params.idRoom;\r\n    const [listObjectMessage, setListObjectMessage] = useState([]);\r\n    const memoIdFriend = useMemo(() => {\r\n      return friendObj.id;\r\n    }, [friendObj.id]);\r\n    const memoIdUser = useMemo(() => {\r\n      return id;\r\n    }, [id]);\r\n    const friendMessages = FirebaseGetFriendMessages(memoIdFriend, memoIdUser);\r\n    \r\n    useEffect(() => {\r\n      setListObjectMessage(friendMessages);\r\n    }, [friendMessages]);\r\n\r\n    useEffect(() => {\r\n      socket.on(\"receive_message\", (objectMessage) => {\r\n          setListObjectMessage((list) => [...list, objectMessage]);\r\n      });\r\n    }, [socket]);\r\n\r\n//Hàm khởi tạo cần thiết\r\n    const sendMessage = async () => {\r\n        if(currentMessage != \"\") {\r\n            const time = Timestamp.now().toDate().toLocaleTimeString('en-US');\r\n            const objectMessage = {\r\n                idSender: id,\r\n                nameSender: fullName,\r\n                msg: currentMessage,\r\n                time: time,\r\n                photoURL: 'https://res.cloudinary.com/dopzctbyo/image/upload/v1649587869/cld-sample.jpg',\r\n                idMessage: (Math.random() + 1).toString(36).substring(2)\r\n            }\r\n            socket.emit(\"send_message\", objectMessage, idRoom);\r\n            setListObjectMessage((list) => [...list, objectMessage]);\r\n            const FriendMessagesDocRef = doc(database, \"FriendMessages\", idRoom);\r\n            await updateDoc(FriendMessagesDocRef, {\r\n              listObjectMessage: arrayUnion(objectMessage)\r\n            });\r\n            setCurrentMessage('');\r\n        }\r\n    }\r\n  return (\r\n    <NativeBaseProvider>\r\n        <Box bg='#2190ff'>\r\n              <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" alignItems=\"center\">\r\n                <Box flex={1} px='1'>\r\n                  <Text bold fontSize='lg' color='white'>{friendObj.fullName}</Text>\r\n                  <Text color='white' fontSize='md'>{friendObj.address} địa chỉ</Text>\r\n                </Box>\r\n                <Box px='2.5'>\r\n                  <AntDesign name=\"addusergroup\" size={24} color=\"white\" />\r\n                </Box>\r\n                <Box px='2.5'>\r\n                  <Ionicons name=\"image-outline\" size={24} color=\"white\" />\r\n                </Box>\r\n                <Box px='2.5'>\r\n                  <MaterialCommunityIcons name=\"dots-horizontal\" size={24} color=\"white\" />\r\n                </Box>\r\n              </Box>\r\n        </Box>\r\n        <Box flex={1} bg='coolGray.300'>\r\n        <ScrollView>\r\n            <Center my='5'>\r\n              <Box bg='white' borderRadius='lg' p='5' w={[24, 48, 72]}>\r\n                <Center>\r\n                  <Box borderColor='coolGray.400' borderWidth='1' borderRadius='100' p='3'>\r\n                    <MaterialIcons name=\"camera-enhance\" size={24} color=\"grey\" />\r\n                  </Box>\r\n                  <Center>\r\n                    <Text bold>{friendObj.fullName}</Text>\r\n                    <Text color='coolGray.400' textAlign='center'>{friendObj.joinDate}</Text>\r\n                  </Center>\r\n                  <Divider my={2} />\r\n                  <HStack space='3' flexWrap='wrap' justifyContent='center'>\r\n                      <Button size='xs' rounded='2xl' bg='coolGray.100' _text={{ color: '#0998eb', fontWeight: 'bold' }} _hover={{bg:'coolGray.200'}} _pressed={{ bg: 'coolGray.50' }}>Chào cả nhà</Button>\r\n                      <Button size='xs' rounded='2xl' bg='coolGray.100' _text={{ color: '#0998eb', fontWeight: 'bold' }} _hover={{bg:'coolGray.200'}} _pressed={{ bg: 'coolGray.50' }}>Hi mọi người</Button>\r\n                      <Button size='xs' rounded='2xl' bg='coolGray.100' _text={{ color: '#0998eb', fontWeight: 'bold' }} _hover={{bg:'coolGray.200'}} _pressed={{ bg: 'coolGray.50' }}>Hello</Button>\r\n                      <Button\r\n                        size='xs' rounded='2xl' bg='coolGray.100' _text={{ color: '#0998eb', fontWeight: 'bold' }} _hover={{bg:'coolGray.200'}} _pressed={{ bg: 'coolGray.50' }}\r\n                        endIcon={\r\n                          <FontAwesome5 name=\"hands-wash\" size={20} color=\"#d6aa09\" />\r\n                        }\r\n                      />\r\n                      <Button size='xs' rounded='2xl' bg='coolGray.100' _text={{ color: '#0998eb', fontWeight: 'bold' }} _hover={{bg:'coolGray.200'}} _pressed={{ bg: 'coolGray.50' }}>Gửi sticker xin chào</Button>\r\n                  </HStack>\r\n                </Center>\r\n              </Box>\r\n            </Center>\r\n            <Box borderColor='coolGray.500'>\r\n                  {\r\n                    listObjectMessage.map((objectMessage) => {\r\n                      if(objectMessage.idSender === id)\r\n                        return <HStack key={objectMessage.idMessage} style={{flexDirection: 'row-reverse'}} mx='1' my='0.5'>\r\n                            <Image source={{ uri: objectMessage.photoURL }} alt='photoURL' size={8} borderRadius={100} />\r\n                            <VStack bg='#2accf7' p='2' borderRadius='lg' mx='0.5' my='0.5'>\r\n                              <Text fontSize='xs' color='white'>{objectMessage.nameSender}</Text>\r\n                              <Text bold color='white'>{objectMessage.msg}</Text>\r\n                              <Text color='white' fontSize='xs'>{objectMessage.time}</Text>\r\n                            </VStack>\r\n                        </HStack>;\r\n                      else\r\n                        return <HStack key={objectMessage.idMessage} mx='1'>\r\n                                  <Image source={{ uri: objectMessage.photoURL }} alt='photoURL' size={8} borderRadius={100} />\r\n                                  <VStack bg='white' p='2' borderRadius='lg' mx='0.5' my='0.5'>\r\n                                    <Text fontSize='xs'>{objectMessage.nameSender}</Text>\r\n                                    <Text bold>{objectMessage.msg}</Text>\r\n                                    <Text color='coolGray.400' fontSize='xs'>{objectMessage.time}</Text>\r\n                                  </VStack>\r\n                              </HStack>;\r\n                    })\r\n                  }\r\n            </Box>\r\n        </ScrollView>\r\n        </Box>\r\n        <Box>\r\n          <HStack alignItems='center' space='1'>\r\n            <MaterialCommunityIcons name=\"emoticon-kiss-outline\" size={28} color=\"#2190ff\" />\r\n            <Input\r\n              flex={1} size='md'\r\n              variant='unstyled'\r\n              placeholder='Tin nhắn, @'\r\n              InputRightElement={\r\n                <Icon as={<MaterialCommunityIcons name=\"send-circle\" />} size={28} color=\"#2190ff\" onPress={sendMessage} />\r\n              }\r\n              value={currentMessage}\r\n              onChangeText={(e) => setCurrentMessage(e)}\r\n            />\r\n            <MaterialCommunityIcons name=\"dots-horizontal\" size={28} color=\"#2190ff\" />\r\n            <MaterialCommunityIcons name=\"file-image-plus\" size={28} color=\"#2190ff\" />\r\n          </HStack>\r\n        </Box>\r\n    </NativeBaseProvider>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}