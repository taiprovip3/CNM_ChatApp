{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport React, { useEffect, useState } from 'react';\nimport { collection, doc, getDoc, onSnapshot, orderBy, query, where } from 'firebase/firestore';\nimport { database } from \"../../firebase\";\n\nvar FirebaseGetRoomMessages = function FirebaseGetRoomMessages(idRoom) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      roomMessages = _useState2[0],\n      setRoomMessages = _useState2[1];\n\n  if (!idRoom || !idRoom.length) {\n    setRoomMessages([]);\n    return;\n  }\n\n  useEffect(function () {\n    var getData = function getData() {\n      var RoomMessagesDocRef, RoomMessagesSnap, DATA;\n      return _regeneratorRuntime.async(function getData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              RoomMessagesDocRef = doc(database, \"RoomMessages\", idRoom);\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(getDoc(RoomMessagesDocRef));\n\n            case 3:\n              RoomMessagesSnap = _context.sent;\n              DATA = RoomMessagesSnap.data().listObjectMessage;\n              console.log('DATALIST :: ', RoomMessagesSnap.data().listObjectMessage);\n              setRoomMessages(DATA);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getData();\n  }, [idRoom]);\n  return roomMessages;\n};\n\nexport default FirebaseGetRoomMessages;","map":{"version":3,"names":["React","useEffect","useState","collection","doc","getDoc","onSnapshot","orderBy","query","where","database","FirebaseGetRoomMessages","idRoom","roomMessages","setRoomMessages","length","getData","RoomMessagesDocRef","RoomMessagesSnap","DATA","data","listObjectMessage","console","log"],"sources":["F:/Hoc ki 4/Cong nghe moi/AppChat/client/Components/service/FirebaseGetRoomMessages.js"],"sourcesContent":["import { View, Text } from 'react-native';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { collection, doc, getDoc, onSnapshot, orderBy, query, where } from 'firebase/firestore';\r\nimport { database } from '../../firebase';\r\n\r\n//UseEffect này luôn lắng nge\r\n//UseEffect này chỉ chạy lại khi biến owner lớp cha gọi nó thay đổi giá trị truyền vào\r\n//Nếu thay đổi hàm sẽ đc thực thi => trả về danh sách rooms mới.\r\nconst FirebaseGetRoomMessages = (idRoom) => {\r\n    const [roomMessages, setRoomMessages] = useState([]);\r\n    if(!idRoom || !idRoom.length){\r\n        setRoomMessages([]);\r\n        return;\r\n    }\r\n    useEffect(() => {\r\n        const getData = async() => {\r\n            const RoomMessagesDocRef = doc(database, \"RoomMessages\", idRoom);\r\n            const RoomMessagesSnap = await getDoc(RoomMessagesDocRef);\r\n            const DATA = RoomMessagesSnap.data().listObjectMessage;\r\n            console.log('DATALIST :: ', RoomMessagesSnap.data().listObjectMessage);\r\n            setRoomMessages(DATA);\r\n        }\r\n        getData();\r\n    }, [idRoom]);\r\n    return roomMessages;\r\n};\r\n\r\nexport default FirebaseGetRoomMessages;"],"mappings":";;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,EAAqBC,GAArB,EAA0BC,MAA1B,EAAkCC,UAAlC,EAA8CC,OAA9C,EAAuDC,KAAvD,EAA8DC,KAA9D,QAA2E,oBAA3E;AACA,SAASC,QAAT;;AAKA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,MAAD,EAAY;EACxC,gBAAwCV,QAAQ,CAAC,EAAD,CAAhD;EAAA;EAAA,IAAOW,YAAP;EAAA,IAAqBC,eAArB;;EACA,IAAG,CAACF,MAAD,IAAW,CAACA,MAAM,CAACG,MAAtB,EAA6B;IACzBD,eAAe,CAAC,EAAD,CAAf;IACA;EACH;;EACDb,SAAS,CAAC,YAAM;IACZ,IAAMe,OAAO,GAAG,SAAVA,OAAU;MAAA;MAAA;QAAA;UAAA;YAAA;cACNC,kBADM,GACeb,GAAG,CAACM,QAAD,EAAW,cAAX,EAA2BE,MAA3B,CADlB;cAAA;cAAA,iCAEmBP,MAAM,CAACY,kBAAD,CAFzB;;YAAA;cAENC,gBAFM;cAGNC,IAHM,GAGCD,gBAAgB,CAACE,IAAjB,GAAwBC,iBAHzB;cAIZC,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BL,gBAAgB,CAACE,IAAjB,GAAwBC,iBAApD;cACAP,eAAe,CAACK,IAAD,CAAf;;YALY;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAhB;;IAOAH,OAAO;EACV,CATQ,EASN,CAACJ,MAAD,CATM,CAAT;EAUA,OAAOC,YAAP;AACH,CAjBD;;AAmBA,eAAeF,uBAAf"},"metadata":{},"sourceType":"module"}